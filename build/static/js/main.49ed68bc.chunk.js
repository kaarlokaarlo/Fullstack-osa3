(this["webpackJsonposa2.b"]=this["webpackJsonposa2.b"]||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(14),r=t(2),l=t(13),o=t.n(l),c=(t(20),t(0)),u=t.n(c),i=function(e){var n=e.add,t=e.newC,a=e.handle;return u.a.createElement("form",{onSubmit:n},u.a.createElement("div",null,"filter shown with"),u.a.createElement("input",{value:t,onChange:a}))},m=function(e){var n=e.add,t=e.newN,a=e.handle,r=e.newNu,l=e.handleNu;return u.a.createElement("form",{onSubmit:n},u.a.createElement("div",null,"name:"),u.a.createElement("input",{value:t,onChange:a}),u.a.createElement("div",null,u.a.createElement("div",null,"number:"),u.a.createElement("input",{value:r,onChange:l}),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"add"))))},d=function(e){var n=e.id,t=e.name,a=e.handleClick;return u.a.createElement("button",{name:t,id:n,onClick:a},"delete")},f=function(e){var n=e.pers,t=e.newC,a=e.handleClick;return""!==t?n.filter((function(e){return e.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())})).map((function(e){return u.a.createElement("div",{key:e.name},u.a.createElement("p",null,e.name," ",e.number,u.a.createElement(d,{name:e.name,id:e.id,handleClick:a})))})):n.map((function(e){return u.a.createElement("div",{key:e.id},u.a.createElement("p",null," ",e.name," ",e.number,u.a.createElement(d,{name:e.name,id:e.id,handleClick:a})))}))},s=t(3),b=t.n(s),h="/api/persons/",p=function(){return b.a.get(h)},v=function(e){return b.a.post(h,e)},E=function(e){return b.a.delete("".concat(h).concat(e))},w=function(e,n){var t=h+e;return b.a.put(t,n)},g=function(){var e=Object(c.useState)([]),n=Object(r.a)(e,2),t=n[0],l=n[1],o=Object(c.useState)(""),d=Object(r.a)(o,2),s=d[0],b=d[1],h=Object(c.useState)(""),g=Object(r.a)(h,2),C=g[0],j=g[1],O=Object(c.useState)(""),k=Object(r.a)(O,2),y=k[0],S=k[1],L=Object(c.useState)(null),N=Object(r.a)(L,2),T=N[0],x=N[1],D=Object(c.useState)(!1),I=Object(r.a)(D,2),A=I[0],B=I[1];Object(c.useEffect)((function(){p().then((function(e){l(e.data)}))}),[]);return u.a.createElement("div",null,u.a.createElement("h2",null,"Phonebook"),u.a.createElement((function(e){var n=e.message,t={color:"green",fontSize:"20px",background:"lightgray",borderStyle:"solid",padding:"10px",borderRadius:"5px",marginBottom:"10px"};return e.style&&(t.color="red"),null===n?null:u.a.createElement("div",{style:t},u.a.createElement("br",null),u.a.createElement("em",null,n))}),{message:T,style:A}),u.a.createElement(i,{add:function(e){e.preventDefault(),S("")},handle:function(e){S(e.target.value)},newC:y}),u.a.createElement("h2",null,"Add a new"),u.a.createElement(m,{add:function(e){e.preventDefault();var n={name:s,number:C};if(t.map((function(e){return e.name.toLowerCase()})).includes(n.name.toLowerCase())){if(!C.isEmpty&&window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one? "))){var r=t.find((function(e){return e.name.toLowerCase()===n.name.toLowerCase()})),o=r.id,c=Object(a.a)({},r,{number:n.number});w(o,c).then((function(e){l(t.map((function(n){return n.id!==o?n:e.data}))),x("Updated ".concat(r.name,"'s number")),b(""),j(""),setTimeout((function(){x(null)}),5e3)})).catch((function(e){x("Information of ".concat(r.name," has already been removed from server"),1),B(!0),setTimeout((function(){x(null),B(!1)}),5e3)}))}}else v(n).then((function(e){l(t.concat(e.data)),x("Added ".concat(n.name)),b(""),j(""),setTimeout((function(){x(null)}),5e3)})).catch((function(e){console.log(e.response.data),x(e.response.data),B(!0),setTimeout((function(){x(null),B(!1)}),5e3)}))},newN:s,handle:function(e){b(e.target.value)},newNu:C,handleNu:function(e){j(e.target.value)}}),u.a.createElement("h2",null,"Numbers"),u.a.createElement(f,{handleClick:function(e){if(window.confirm("Delete "+e.target.name+"?")){var n=e.target;console.log(e.target.id),E(e.target.id).then((function(e){var a=t.filter((function(e){return e.id!==n.id}));l(a),x("Deleted ".concat(n.name)),setTimeout((function(){x(null)}),5e3)})).catch((function(e){x("Information of ".concat(n.name," has already been removed from server")),B(!0),setTimeout((function(){x(null),B(!1)}),5e3)}))}},pers:t,newC:y}))};n.default=g;o.a.render(u.a.createElement(g,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.49ed68bc.chunk.js.map